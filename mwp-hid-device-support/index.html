
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mission Planner, Ground Control Station, Log Replay">
      
      
        <meta name="author" content="Jonathan Hudson">
      
      
      
        <link rel="prev" href="../mwp-Power-and-screen-management/">
      
      
        <link rel="next" href="../mwp-assist-now/">
      
      
      <link rel="icon" href="../images/mwp_icon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>mwp HID Device Support - mwptools</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/extra.css">
    
      <link rel="stylesheet" href="../assets/pdf.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mwp-hid-device-support" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="mwptools" class="md-header__button md-logo" aria-label="mwptools" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mwptools
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              mwp HID Device Support
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/stronnag/mwptools/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="mwptools" class="md-nav__button md-logo" aria-label="mwptools" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    mwptools
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/stronnag/mwptools/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
      <br>
      <small>A mission planner for the rest of us</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp_support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Help and Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-Gtk4-migration-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running mwp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Side Bar Concepts and Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mission-editor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mission Editor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gcs-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ground Control Station Features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../replay-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Replay Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc-ui-elements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Miscellaneous UI Elements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-terrain-avoidance-quick-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Terrain Avoidance Quick Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Mission-Elevation-Plot-and-Terrain-Analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mission Elevations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-los-tool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Line of Sight (LOS) Tool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-multi-procotol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    "Serial" device support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-Configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mwp Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-safehomes-editor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Safehome and Auto-land
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-geozones/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mwp and Geozones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-Radar-View/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Radar View
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-telemetry-tracker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Telemetry Tracking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-area-planner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mwp Survey Planner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp_video_player/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Playing Video in mwp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-text-to-speech/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mwp text to speech
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Fly-By-Home-waypoints-%28inav-4-new-feature%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fly By Home Waypoints
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Black-Ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Anonymous Maps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-follow-me/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mwp Follow Me
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Build and Install / OS Specific
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Build and Install / OS Specific
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Building-with-meson-and-ninja/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build / install mwp (Generic)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-macos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MacOS (Homebrew)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-windows-msys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows (MSys2)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Miscellaneous
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwpset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mwp Settings Editor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwpsettings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mwp Gsettings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-Power-and-screen-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Power and screen management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    mwp HID Device Support
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    mwp HID Device Support
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    <span class="md-ellipsis">
      Caveats
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rc-mapping-file" class="md-nav__link">
    <span class="md-ellipsis">
      RC Mapping File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mwp-hid-test-tool" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-test tool
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mwp-hid-test tool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-invert-modifier" class="md-nav__link">
    <span class="md-ellipsis">
      The invert modifier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-latch-modifier" class="md-nav__link">
    <span class="md-ellipsis">
      The latch modifier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-deadband-keyword" class="md-nav__link">
    <span class="md-ellipsis">
      The deadband keyword
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-default-keyword" class="md-nav__link">
    <span class="md-ellipsis">
      The default keyword
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mwp-hid-test-usage" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-test usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapping-file-with-modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      Mapping file with modifiers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mwp-hid-server" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mwp-hid-server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mwp-hid-server-usage" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-server usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mwp-hid-server-command-language" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-server command language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mwp-hid-cli" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-cli
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mwp-ui" class="md-nav__link">
    <span class="md-ellipsis">
      mwp UI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mwp UI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#channel-value-display" class="md-nav__link">
    <span class="md-ellipsis">
      Channel value display
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-and-activate" class="md-nav__link">
    <span class="md-ellipsis">
      Enable and Activate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mwp-settings" class="md-nav__link">
    <span class="md-ellipsis">
      mwp settings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Miscellaneous notes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serial-usage-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Serial Usage Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Serial Usage Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#throughput-example" class="md-nav__link">
    <span class="md-ellipsis">
      Throughput example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inav-rc-quirks" class="md-nav__link">
    <span class="md-ellipsis">
      INAV RC Quirks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="INAV RC Quirks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general" class="md-nav__link">
    <span class="md-ellipsis">
      General
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inavs-msp-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      INAV's MSP protocol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inavs-rx-protocols-sbus-crsf-etc" class="md-nav__link">
    <span class="md-ellipsis">
      INAV's RX protocols (SBus, CRSF etc.)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-assist-now/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UBlox AssistNow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inav-4.0-multi-missions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    INAV 4.0 Multi-Mission Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mqtt---bulletgcss-telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BulletGCSS Telemetry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Support-for-inav-3.0-WP-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mwp and INAV 3.0 Mission Updates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Replaying-Ardupilot-logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ardupilot log replay
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-Dbus-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DBus API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp_support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Help and Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-miscellaneous-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mwp miscellaneous tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-telemetry-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mwp telemtry and URI specifics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../licence-misc-info/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Licence and Alternative Tools
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    <span class="md-ellipsis">
      Caveats
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rc-mapping-file" class="md-nav__link">
    <span class="md-ellipsis">
      RC Mapping File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mwp-hid-test-tool" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-test tool
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mwp-hid-test tool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-invert-modifier" class="md-nav__link">
    <span class="md-ellipsis">
      The invert modifier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-latch-modifier" class="md-nav__link">
    <span class="md-ellipsis">
      The latch modifier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-deadband-keyword" class="md-nav__link">
    <span class="md-ellipsis">
      The deadband keyword
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-default-keyword" class="md-nav__link">
    <span class="md-ellipsis">
      The default keyword
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mwp-hid-test-usage" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-test usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapping-file-with-modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      Mapping file with modifiers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mwp-hid-server" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mwp-hid-server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mwp-hid-server-usage" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-server usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mwp-hid-server-command-language" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-server command language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mwp-hid-cli" class="md-nav__link">
    <span class="md-ellipsis">
      mwp-hid-cli
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mwp-ui" class="md-nav__link">
    <span class="md-ellipsis">
      mwp UI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mwp UI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#channel-value-display" class="md-nav__link">
    <span class="md-ellipsis">
      Channel value display
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-and-activate" class="md-nav__link">
    <span class="md-ellipsis">
      Enable and Activate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mwp-settings" class="md-nav__link">
    <span class="md-ellipsis">
      mwp settings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Miscellaneous notes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serial-usage-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Serial Usage Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Serial Usage Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#throughput-example" class="md-nav__link">
    <span class="md-ellipsis">
      Throughput example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inav-rc-quirks" class="md-nav__link">
    <span class="md-ellipsis">
      INAV RC Quirks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="INAV RC Quirks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general" class="md-nav__link">
    <span class="md-ellipsis">
      General
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inavs-msp-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      INAV's MSP protocol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inavs-rx-protocols-sbus-crsf-etc" class="md-nav__link">
    <span class="md-ellipsis">
      INAV's RX protocols (SBus, CRSF etc.)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="mwp-hid-device-support">mwp HID Device Support<a class="headerlink" href="#mwp-hid-device-support" title="Permanent link">#</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">#</a></h2>
<p>From 25.05.07, <a href="https://github.com/stronnag/mwptools">mwp</a> supports using a HID (Human Input Device) to provide RC (stick / switch inputs) to the FC.  An example of this might be running mwp on a game console such as SteamDeck and using the SteamDeck HID (sticks, buttons) to provide TX functions.</p>
<p>While mwp provides functionality for doing this, it is not condoned as an acceptable way of controlling a UAS. Using <code>NSP_SET_RAW_RC</code> (aka <code>MSPRC</code>) over a MSP telemetry link cannot provide the update rate / performance / reliability / safety of a standard RC TX/RX.</p>
<ul>
<li>Lower control update rate as the RC  messages have to interleaved with other telemetry.</li>
<li>Lower control update rate as the stream is half duplex and 90% of the messages require an acknowledgement.</li>
<li>Still have to meet INAV's hard real time refresh rate.</li>
<li>Inefficient message format (e.g. 16 bits per channel vice 11 bits / channel (cf. sBUS, CRSF)).</li>
<li>The dedicated RC TX can perform additional optimisations in terms of data sizes, refresh rate for switch channels etc.</li>
</ul>
<p>A dedicated RC RX has smaller, efficient messages delivered much more frequently, such that if one is dropped it doesn't really matter. Interleaving <code>MSP_SET_RAW_RC</code> within a stream of maybe 9 other telemetry messages means a signification reduction in RC performance. <em>Caveat Emptor!</em></p>
<h3 id="caveats">Caveats<a class="headerlink" href="#caveats" title="Permanent link">#</a></h3>
<ul>
<li>Not supported for "old" INAV (at least prior to 2.0).</li>
<li>mwp's HID implementation supports the same number of RC channels as does your flight controller (for <code>MSP_SET_RAW_RC</code>).</li>
<li>mwp will send the lesser of the number of channels supported by the FC and the number of channels defined in the <a href="#rc-mapping-file">RC mapping file</a>.</li>
</ul>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">#</a></h2>
<ul>
<li>Telemetry radio capable sustaining of at least 12 MSP messages / second.</li>
<li>mwp uses <code>MSP_SET_RAW_RC</code> (this may preclude use of some mLRS configurations).</li>
<li>Either the FC is configured with <code>USE_MSP_RC_OVERRIDE</code> and appropriate <code>msp_override_channels</code> or the FC is configured for <code>set receiver_type = MSP</code></li>
<li>It is recommended that you have a validated failsafe solution.</li>
</ul>
<h2 id="rc-mapping-file">RC Mapping File<a class="headerlink" href="#rc-mapping-file" title="Permanent link">#</a></h2>
<p>It is necessary to generate a mapping file that maps the HID device (e.g. game controller, joystick) inputs to RC functions (sticks / buttons).</p>
<p>mwp's uses the well known <a href="https://www.libsdl.org/">SDL</a> (Simple DirectMedia Layer) library. This library handles numerous input devices (Joysticks, Game Controllers) in well defined manner across multiple platforms.</p>
<p>mwp provides a tool <code>mwp-hid-test</code> to allow the user to identify the inputs on their HID devices and allocate / map inputs to RC Channels. SDL provides for the following HID inputs:</p>
<ul>
<li>Axes : "Sticks" and some switches (3 or more positions).</li>
<li>Buttons : Some switches (2 position, momentary).</li>
<li>Hats : ?</li>
<li>Balls : ?</li>
</ul>
<p>Note that "Hats" and "Balls" are effectively undefined in mwp's reference implementation solely because the author has no example of such devices.</p>
<h2 id="mwp-hid-test-tool">mwp-hid-test tool<a class="headerlink" href="#mwp-hid-test-tool" title="Permanent link">#</a></h2>
<p>The user plugs in the required HID controller and starts the application (from a shell / terminal). She can then exercises all the required (stick / switch / button) inputs. <code>mwp-hid-test</code> will record the input, best shown by example:</p>
<div class="highlight"><pre><span></span><code>$ mwp-hid-test
There are 1 joysticks connected.
Entry 0, OpenTX Radiomaster Boxer Joystick guid=0300c19b09120000544f000011010000 game controller=true
Name: OpenTX Radiomaster Boxer Joystick
No. axes 8
No. balls 0
No. buttons 24
No. hats 0
Joystick 0 connected
 ....
Axis 2 value -32608.
 ....
Button 1 released.
 ....
Joystick 0 removed.
</code></pre></div>
<p>In the above example, <code>mwp-hid-test</code>  application is started, the device (Boxer radio in HID mode) is detected. If multiple devices are detected, the user will be asked which entry they wish to use.</p>
<p>In the example above:</p>
<ul>
<li>The user moved the throttle stick, this is identified as "Axis 2"</li>
<li>The user moved switch "SF", this is identified as "Button 1".</li>
</ul>
<p>After exercising all required inputs, the user should prepare a mapping file; this is a simple plain text file mapping "Axis" and "Button" inputs to RC Channels (RC channels numbered from 1). For example:</p>
<p><div class="highlight"><pre><span></span><code>$ less boxer.txt
# Sticks
Axis 0 = Channel 1 ; Aileron
Axis 1 = Channel 2 ; Elevator
Axis 2 = Channel 3 ; Throttle
Axis 3 = Channel 4 ; Rudder
# Switches
Axis 4 = Channel 5 ; SE (Arming)
Axis 5 = Channel 6 ; SA
Axis 6 = Channel 7 ; SB
Axis 7 = Channel 8 ; SC
Button 0 = Channel 9 ; SD
Button 1 = Channel 10 ; SF
$
</code></pre></div>
Notes:</p>
<ul>
<li>Blank lines, lines starting with # or ; are ignored</li>
<li>Trailing items after ; or # are ignored (comments / notes).</li>
</ul>
<p>Definition lines are of the form <code>Axis N = Channel X</code> or <code>Button M = Channel Y</code>.</p>
<ul>
<li>The <code>Axis N</code> or <code>Button M</code> data is that shown by <code>mwp-hid-test</code>. The Channel is the RC channel for that input.</li>
<li>mwp maps the value from SDL (-32608 to 32607) to RC range 1000-2000. Buttons are mapped from off = 1000 to on = 2000.</li>
<li>It is possible to set an input as inverted, latched or define a deadband.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">RC Map</p>
<p>The first four channels <strong>must</strong> reflect the RC Map as defined in the flight controller (or AERT for Multiwii), as channels are not reordered when sent to the FC.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Sanity Checking</p>
<p>Currently, there is NO sanity checking on the mapping file. Until (or even after) sanity checking is implemented, you are advised to validate the file with <code>mwp-hid-server --check FILE</code> to verify that all inputs result in the expected channel values.</p>
</div>
<p>For example:</p>
<p><div class="highlight"><pre><span></span><code>$ cat /tmp/mh2.txt
# Axis
# Buttons
Button 0 = Channel 17 ;
Button 1 = Channel 18 ;
</code></pre></div>
results in:</p>
<p><div class="highlight"><pre><span></span><code>$ mwp-hid-server --check /tmp/mh2.txt
Channel 1 undefined (0)
Channel 2 undefined (0)
Channel 3 undefined (0)
Channel 4 undefined (0)
Channel 5 undefined (0)
Channel 6 undefined (0)
Channel 7 undefined (0)
Channel 8 undefined (0)
Channel 9 undefined (0)
Channel 10 undefined (0)
Channel 11 undefined (0)
Channel 12 undefined (0)
Channel 13 undefined (0)
Channel 14 undefined (0)
Channel 15 undefined (0)
Channel 16 undefined (0)
Channel 17 Button 0
Channel 18 Button 1

*** Note: Undefined channels ***

Button 0: channel 17, ctype 0, lval 0, lmax 2
Button 1: channel 18, ctype 0, lval 0, lmax 2
</code></pre></div>
he value in parentheses after "undefined" indicates the value that will be sent for undefined channels. In a valid value is needed (for example CRSF/SBUS and MSP Override), see the <code>default</code> keyword.</p>
<p>For Game Controllers, it is (probably) possible to provide a SDL Mapping file as a parameter to mwp-hid-test (for example, see <a href="https://github.com/mdqinc/SDL_GameControllerDB">https://github.com/mdqinc/SDL_GameControllerDB</a>), that may possibly) help the SDL library to manage the device.</p>
<p><div class="highlight"><pre><span></span><code>$ mwp-hid-test gamecontrollerdb.txt
</code></pre></div>
An example file for the SteamDeck might look like:</p>
<div class="highlight"><pre><span></span><code># Sticks
Axis 2 = Channel 1 ; Aileron
Axis 3 = Channel 2 invert ; Elevator
Axis 1 = Channel 3 invert ; Throttle
Axis 0 = Channel 4 ; Rudder

# Switches
Button 9 = Channel 5 ; SE (Arming) (L1)
Axis 4 = Channel 6 ; SA (L2)
Button 10 = Channel 7 ; SB (R1)
Axis 5 = Channel 8 ; SC (R2)

# More switches
Button 12 = Channel 9 ; SD (R3)
Button 13 = Channel 10 ; SF (L3)
Button 14 = Channel 11 ; SG (R4)
Button 15 = Channel 12 ; SH (L4)

# Buttons
Button 0 = Channel 13 ; SI (A)
Button 1 = Channel 14 ; SJ (B)
Button 2 = Channel 15 ; SK (X)
Button 3 = Channel 16 ; SL (Y)

# Unused:
# Touchpads, D-Pad, Menu, Stick Press
# Maybe use for local configurations and triggers
</code></pre></div>
<p>Note the use of <code>invert</code>. Mapping file courtesy of GH user @arealmess.</p>
<h4 id="the-invert-modifier">The <code>invert</code> modifier<a class="headerlink" href="#the-invert-modifier" title="Permanent link">#</a></h4>
<p>Inverts the input. May be applied to axes and buttons.</p>
<h4 id="the-latch-modifier">The <code>latch</code> modifier<a class="headerlink" href="#the-latch-modifier" title="Permanent link">#</a></h4>
<p>Provides a latch function for momentary action buttons.</p>
<ul>
<li><code>latch</code> implements the default 2-pole latching switch;</li>
<li><code>latch=N</code> implements an N-pole latching switch (N = 2 - 6).</li>
</ul>
<p>Pressing the latched switch toggles the channel value, so with the mapping line:</p>
<div class="highlight"><pre><span></span><code>Button 1 = Channel 10 latch=3 ; SF
</code></pre></div>
<p>Repeatedly pressing the button would result in channel values of (inital value)<code>1000</code> =&gt; <code>1500</code>, <code>2000</code>, <code>1000</code>, <code>1500</code>, <code>2000</code>, <code>1000</code>, <code>1500</code>, <code>2000</code>. Note that the values wrap rather than go up/down like a mechanical switch.</p>
<p>Inverted latches are also valid.</p>
<div class="highlight"><pre><span></span><code>Button 1 = Channel 10 latch=3 invert ; SF
</code></pre></div>
<h4 id="the-deadband-keyword">The <code>deadband</code> keyword<a class="headerlink" href="#the-deadband-keyword" title="Permanent link">#</a></h4>
<p><code>deadband</code> is a global option and is specified with the <code>deadband</code> key and a value in the range 1-1024 (in SDL resolution, c. 15 PWM us).</p>
<h4 id="the-default-keyword">The <code>default</code> keyword<a class="headerlink" href="#the-default-keyword" title="Permanent link">#</a></h4>
<p><code>default</code> is a global option and specifies the value that will be transmitted for undefined channels. The default is 0, which means that INAV/MSP will ignore the channel. For INAV/RX (SBUS, CRSF) a valid value is needed for undefined channels, even with override.</p>
<div class="highlight"><pre><span></span><code># Use a valid value for undefined channels
default = 1505
</code></pre></div>
<p>Results in (<code>--check</code>)</p>
<p>Mapping File:</p>
<div class="highlight"><pre><span></span><code>default = 1505
# Axis
# Buttons
Button 4 = Channel 12 ;
Button 3 = Channel 20 latch ;
</code></pre></div>
<p>Check show:
<div class="highlight"><pre><span></span><code>Channel 1 undefined (1505)
Channel 2 undefined (1505)
...
Channel 11 undefined (1505)
Channel 12 Button 4
Channel 13 undefined (1505)
...
Channel 19 undefined (1505)
Channel 20 Button 3
</code></pre></div></p>
<h3 id="mwp-hid-test-usage">mwp-hid-test usage<a class="headerlink" href="#mwp-hid-test-usage" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>$ mwp-hid-test --help
Usage:
  mwp-hid-test [OPTION?]

Help Options:
  -h, --help         Show help options

Application Options:
  -d, --deadband     Deadband (in SDL frame of reference)
</code></pre></div>
<p>Note that deadband is applied in terms of the SDL resolution, so 1 microsecond of RC PWM is equivalent to c. 65 SDL units.</p>
<h3 id="mapping-file-with-modifiers">Mapping file with modifiers<a class="headerlink" href="#mapping-file-with-modifiers" title="Permanent link">#</a></h3>
<p>e.g.  deadband and invert:</p>
<div class="highlight"><pre><span></span><code>$ less boxer.txt
# Sticks
Axis 0 = Channel 1 ; Aileron
Axis 1 = Channel 2 ; Elevator
Axis 2 = Channel 3 ; Throttle
Axis 3 = Channel 4  invert ; Rudder
# Switches
Axis 4 = Channel 5 ; SE (Arming)
Axis 5 = Channel 6 ; SA
Axis 6 = Channel 7 invert ; SB
Axis 7 = Channel 8 ; SC
Button 0 = Channel 9  invert ; SD
Button 1 = Channel 10 ; SF

deadband = 200
</code></pre></div>
<ul>
<li><code>deadband</code> is a global option and is specified with the <code>deadband</code> key and a value in the range 1-1024 (in SDL resolution, c. 15 PWM us).</li>
<li><code>invert</code> is a per-channel keyword. Add <code>invert</code> after the channel number and before any trailing comment.</li>
</ul>
<p>In the above example, channels 4, 7 and 9 will be inverted.</p>
<h2 id="mwp-hid-server">mwp-hid-server<a class="headerlink" href="#mwp-hid-server" title="Permanent link">#</a></h2>
<p>mwp does not communicate directly with the HID device, this is done by an intermediate program, <code>mwp-hid-server</code> using a simple line orientated, text based protocol. Normally, this is transparent to the user, as mwp handles the invocation of and communications with <code>mwp-hid-server</code>.  It is, however, possible to run <code>mwp-hid-server</code> manually to test your RC mapping file. In addition, having a simple, defined protocol allows other mapping implementations (e.g. other than SDL) to be implemented.</p>
<h4 id="mwp-hid-server-usage">mwp-hid-server usage<a class="headerlink" href="#mwp-hid-server-usage" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code>$ mwp-hid-server  --help
Usage:
  mwp-hid-server [OPTION?] rc-mapping-file

Help Options:
  -h, --help           Show help options

Application Options:
  -v, --verbose        Verbose mode
  -f, --fake           Fake values (for testing without HID hardware)
  -p, --port=31025     Udp port
  -c, --check=false    Check mapping file
</code></pre></div>
<ul>
<li><code>rc-mapping-file</code> is the simple text file that maps the capabilities of the HID device to RC Channels. This was discussed above.</li>
<li><code>verbose</code> will display channel values every 10 seconds.</li>
</ul>
<h4 id="mwp-hid-server-command-language">mwp-hid-server command language<a class="headerlink" href="#mwp-hid-server-command-language" title="Permanent link">#</a></h4>
<p>The <code>mwp-hid-server</code> server listens on a defined UDP port (default 31025) for the following commands:</p>
<ul>
<li><code>raw</code> : Returns an array of int16 values, little endian, representing RC channel values..</li>
<li><code>info</code> : Returns information (free form text) on the connected HID device.</li>
<li><code>quit</code> : Terminates the server</li>
<li><code>text</code> : Returns a text string of space separated channel values.</li>
<li><code>set</code> : sets RC data for the RC channels. Data is provided as a set of space separated values, for example <code>set 1600 1700 1010 1889</code>.</li>
</ul>
<p><code>mwp</code> uses only the <code>info</code> and <code>raw</code> commands.</p>
<p>The <code>mwp-hid-server</code> also accepts commands on <code>STDIN</code> and replies to <code>STDOUT</code>. This is used when spawned by mwp, to mitigate some Windows' startup synchronisation issues.</p>
<h4 id="mwp-hid-cli"><code>mwp-hid-cli</code><a class="headerlink" href="#mwp-hid-cli" title="Permanent link">#</a></h4>
<p><code>mwp-hid-cli</code> is a simple command line tool to investigate the hid server. This allows the user to send the server commands listed above to a running <code>mwp-hid-server</code>.</p>
<div class="highlight"><pre><span></span><code>$ mwp-hid-cli
udp conn 127.0.0.1:38668 127.0.0.1:31025
&gt; info
OpenTX Radiomaster Boxer Joystick Axes: 8 Buttons: 24
&gt; text
 1500 1500 1000 1500 1000 1001 1002 1003 1004 1005 1006 1007 1009 1010 1011 1012
&gt; quit
</code></pre></div>
<p>You should ensure that any manually invoked test <code>mwp-hid-server</code> is closed before using the HID function with mwp. It is not advisable to issue the <code>raw</code> command in the test environment, as your terminal may not handle the raw data with any elegance.</p>
<h2 id="mwp-ui">mwp UI<a class="headerlink" href="#mwp-ui" title="Permanent link">#</a></h2>
<p>HID support is selectable at run time via mwp's <code>Edit &gt; MSP RC Setting</code> menu option. Note, this option is only sensitive when the main serial port is closed, so you cannot change an open MSP session.</p>
<p><img alt="settings" src="../images/mwp-rc-set.png" width="30%" /></p>
<p>If enabled, <code>mwp-hid-server</code> is invoked with the provided mapping file. If you need to pass another option to <code>mwp-hid-server</code>  (for example <code>-f</code> for testing), this may be done using the environment variable <code>MWP_HIDOPT</code>, for example <code>MWP_HIDOPT=-f</code>.</p>
<p>By default (if no mapping file has been previously set), the settings UI looks for the mapping file in the mwp configuration directory (<code>$XDG_CONFIG_HOME/mwp</code> i.e. <code>~/.config/mwp</code> on POSIX OS, <code>%LOCALAPPDATA%\mwp\</code> on Windows). The user may select any other suitable location in the file chooser..</p>
<p>With mwp's HID / <code>MSP_SET_RAW_RC</code> enabled, when the <strong>main telemetry channel is started</strong>, the "stick display" icon will show in the bottom right of the map:</p>
<p><img alt="SticksIcon" src="../images/mwp-rc-stick-icon.png" /></p>
<p>This may be expanded (click on the icon) to show the sticks.</p>
<p><img alt="stick-open" src="../images/mwp-rc-stick-open.png" /></p>
<p>This may be iconised again by right click.</p>
<h3 id="channel-value-display">Channel value display<a class="headerlink" href="#channel-value-display" title="Permanent link">#</a></h3>
<p>It is possible to have mwp display channel values (theme sensitive):</p>
<p><img alt="show-channels light" src="../images/hid-light.png" /></p>
<p>or</p>
<p><img alt="show-channels dark" src="../images/hid-dark.png" /></p>
<p>The user will have to add their own "hot key" / <a href="../mwp-Configuration/#keyboard-accelerators">keyboard accelerator</a> to active the "show-channels" action, for example:</p>
<div class="highlight"><pre><span></span><code>### ~/.config/mwp/accels / %LOCALAPPDATA%\mwp\accels ###

# bind &quot;show-channels&quot; to the F2 key
show-channels F2
</code></pre></div>
<p>Then toggling F2 will display / close the channels window.</p>
<h3 id="enable-and-activate">Enable and Activate<a class="headerlink" href="#enable-and-activate" title="Permanent link">#</a></h3>
<p>mwp's HID implementation distinguishes between <strong>Enabled</strong> and <strong>Activated</strong> as follows:</p>
<p><strong>Enabled</strong> : In the MSPRC settings dialog means that the <code>mwp-hid-server</code> will start when an MSP port is started and stop when the MSP port is closed. This is a prerequisite for MSPRC.
<strong>Activated</strong>: This means that that mwp will use data from the <code>mwp-hid-server</code>  to send <code>MSP_SET_RAW_RC</code> to the FC.</p>
<p>When MSPRC is <strong>Activated</strong>, then mwp will first interrogate the FC <code>MSP_RC</code> to set the current RC channels. This is used to set the value for <code>latch</code>  buttons.
After  <code>MSP_RC</code> has been received, mwp will use data from the <code>mwp-hid-server</code>  to send <code>MSP_SET_RAW_RC</code> to the FC.</p>
<p>The MSPRC function may be <strong>Activated</strong> / <strong>Deactivated</strong> as required while a MSP port is active.</p>
<p><strong>Activate</strong> is controlled from the <code>File &gt; Edit</code> menu.</p>
<p><img alt="Screenshot From 2025-05-13 15-21-26" src="https://github.com/user-attachments/assets/be1c71ce-0cb5-4e66-ab3f-7e44dd997ac3" /></p>
<p>At startup, the <strong>Activate</strong> menu option is set from <strong>Enabled</strong> setting (but can be changed on demand). It is not currently persisted.</p>
<p>Here's an older log fragment showing this:
(Numbers in brackets) are explained below:</p>
<div class="highlight"><pre><span></span><code>21:06:11.522260 :HID DBG: pid=255325 53 (1)
21:06:11.522296 Send HID Info (2)
...
21:06:11.550794 Raw RC: 22 No joystick connected (3)
21:06:11.581800 INAV v8.0.1  SITL (171d00bb) «BENCHYMCTESTY»
21:06:11.581900 Load FC safehomes
21:06:11.803174 :DBG: Clear poller state MWP_SERSTATE_NORMAL
21:06:11.803204 Save home d/l done
21:06:11.803222 Load FC Geozones
21:06:11.803630 :DBG: MSP_RC size 68 (4)
21:06:11.806114 :DBG: Read 4 geozones
21:06:11.813640 :DBG: Clear poller state MWP_SERSTATE_NORMAL
21:06:11.813690 Geozones validated
21:06:11.848278 Sensors: Acc Baro GPS  (00cb)
21:06:11.848310 INAV v8.0.1  SITL (171d00bb) «BENCHYMCTESTY»
21:06:11.848355 Poller cycle for  9 items, 81 / 226 bytes (INAV_STATUS,ANALOG2,NAV_STATUS,RAW_GPS,COMP_GPS,GPSSTATISTICS,WP,ATTITUDE,ALTITUDE)
21:06:11.848391 Start poller
21:06:11.854382 Request RTC pos: 54.355194 -4.523159 sats 16 hdop 100.0
21:06:11.855258 RTC local 2025-05-13T21:06:11.855, fc 2025-05-13T21:06:11.000
21:06:13.386745 Arming flags: Geozone (0060), load 0% MSP_CMDS_INAV_STATUS (5)
21:06:31.669714 :DBG: msprc action set to false, use_rc=1 (6)
21:06:32.576143 Arming flags: Geozone,RC Link (40060), load 0% MSP_CMDS_INAV_STATUS (7)
21:06:53.180132 :DBG: msprc action set to true, use_rc=53 (8)
21:06:53.185002 :DBG: MSP_RC size 68 (9)
21:06:54.080304 Arming flags: Geozone (0060), load 0% MSP_CMDS_INAV_STATUS (10);
...
21:07:00.456903 Serial closed replay 0 (11)
21:07:00.457042 48.952s, rx 192615b, tx 84171b, (3935b/s, 1719b/s) to 0 wait 0, avg poll loop 5 ms messages 8609 msg/s 175.9
</code></pre></div>
<ol>
<li>MSPRC setting was enabled, so the <code>mwp-hid-server</code> is started</li>
<li>mwp  asks the hid for controller info.</li>
<li><code>Fake</code> was set via <code>MWP_HIDOPT=-f</code>; so no joystick is reported as expected. mwp will schedule <code>MSP_RC</code> to get current channel values.</li>
<li>The <code>MSP_RC</code> response is reported (not yet acted upon), this schedules <code>MSP_SET_RAW_RC</code>.</li>
<li>The next polled <code>MSP2_INAV_STATUS</code> reports that the only blocker is "Geozone" (expected for this scenario). In particular "RCLink" is <em>NOT</em> a blocker.</li>
<li>The user uses <code>File &gt; Edit &gt; Activate MSP RC</code> to <strong>Deactivate</strong> MSPRC.</li>
<li>The next polled <code>MSP2_INAV_STATUS</code> reports that the blockers are Geozone" and "RCLink", showiing mwp is no longer scheduling <code>MSP_SET_RAW_RC</code>.</li>
<li>The user uses <code>File &gt; Edit &gt; Activate MSP RC</code> to <strong>Activate</strong> MSPRC again.</li>
<li>The <code>MSP_RC</code> response is reported (not yet acted upon), this schedules <code>MSP_SET_RAW_RC</code>.</li>
<li>The next polled <code>MSP2_INAV_STATUS</code> reports that the only blocker is "Geozone" (expected for this scenario). In particular "RCLink" is <em>NOT</em> a blocker.</li>
<li>The user closed the MSP port, ending the experiment.</li>
</ol>
<p>Some of the text is changed in later versions, but the flow is the same.</p>
<h3 id="mwp-settings">mwp settings<a class="headerlink" href="#mwp-settings" title="Permanent link">#</a></h3>
<p>The MSP RC settings are persisted via the following settings:</p>
<ul>
<li><code>msprc-cycletime</code> (default 150ms)</li>
<li><code>msprc-enabled</code> (default false)</li>
<li><code>msprc-full-duplex</code> (default false)</li>
<li><code>msprc-settings</code> RC mapping file (default not set)</li>
</ul>
<p>The  <code>msprc-cycletime</code> option defines how often mwp sends <code>MSP_SET_RAW_RC</code> messages. INAV requires at least 5Hz (200ms) to avoid fail-safe. Time slots used for <code>MSP_SET_RAW_RC</code> reduces the time available for MSP telemetry data displayed by mwp, so the user needs to choose a compromise setting that balances RC responsiveness with telemetry data refresh within the constraint of the available bandwidth.</p>
<p>The <code>msprc-full-duplex</code> settings defines the use of full duplex transmission for <code>MSP_SET_RAW_RC</code> messages. This will better ensure that the cycle-time requirement is met, as "no reply" <code>MSP_SET_RAW_RC</code> are sent independently of the normal MSP telemetry poller.</p>
<div class="admonition warning">
<p class="admonition-title">Device Dependency</p>
<p>If the device does not support full duplex, enabling  <code>msprc-full-duplex</code> will result in major telemetry failure.</p>
</div>
<p>mwp attempts to detect excessive timeouts due to <code>msprc-full-duplex</code> being set on a half-duplex device, and will disable <code>msprc-full-duplex</code> in such cases.</p>
<h2 id="miscellaneous-notes">Miscellaneous notes<a class="headerlink" href="#miscellaneous-notes" title="Permanent link">#</a></h2>
<ul>
<li>The hard part of this is arbitrating serial usage between the need to maintain INAV's requirement for <code>MSP_SET_RAW_RC</code> (minimum of 5Hz refesh) and mwp's telemetry requirement (minimum say (also) 5 MSP/sec, though it this is not a hard limit, rather a usability desire).</li>
<li>You may consider using <code>USE_MSP_RC_OVERRIDE</code> / <code>MSP RC Override</code> and a backup TX.</li>
<li>Note that mwp tries to send <code>MSP_SET_RAW_RC</code> messages every 150 milliseconds (c. 7Hz) by default. This interval is configurable. The default was chosen to minimise the chances of fail-safe while maintaining a decent telemetry rate.</li>
<li>When the <code>mwp-hid-server</code> is started, mwp gets the current RC values from the FC. If the FC has valid RC data, the <code>mwp-hid-server</code> assumes these values.</li>
</ul>
<h3 id="serial-usage-metrics">Serial Usage Metrics<a class="headerlink" href="#serial-usage-metrics" title="Permanent link">#</a></h3>
<p>mwp can monitor MSP message rates and automatically log the information. If you are testing this <code>MSP_SET_RAW_RC</code> functionality in mwp, consider adding the following to <code>~/.config/mwp/cmdopts</code> / <code>%LOCALAPPDATA%\mwp\cmdopts</code>:</p>
<div class="highlight"><pre><span></span><code>MWP_STATS_LOG=60
</code></pre></div>
<p>This will log MSP throughput every minute into <code>mwp_stderr_YYYY_MM_DD.txt</code>.</p>
<h4 id="throughput-example">Throughput example<a class="headerlink" href="#throughput-example" title="Permanent link">#</a></h4>
<p>Telemetry device: Ebyte E220 LoRa, 115200 ground speed, 38400 air speed, USB connection to GCS.</p>
<p><code>mwp_stderr_YYYY-MM-DD.txt</code> file with lines like:</p>
<div class="highlight"><pre><span></span><code>13:13:30.168812 900.267s, rx 341851b, tx 139948b, (380b/s, 155b/s) to 0 wait 0, avg poll loop 62 ms messages 15046 msg/s 16.7
...
13:14:15.113726 945.195s, rx 358998b, tx 146799b, (380b/s, 155b/s) to 0 wait 0, avg poll loop 62 ms messages 15797 msg/s 16.7
</code></pre></div>
<p>Telemetry device: Ebyte E220 LoRa, 115200 ground speed, 62500 air speed, USB connection to GCS. Slightly higher throughput at the expense of some message timeouts (and maybe also range).</p>
<div class="highlight"><pre><span></span><code>11:36:04.735320 2100.442s, rx 659187b, tx 712573b, (314b/s, 339b/s) to 2 wait 0, avg poll loop 88 ms messages 36053 msg/s 17.2
</code></pre></div>
<p>This device appears usable.</p>
<h2 id="inav-rc-quirks">INAV RC Quirks<a class="headerlink" href="#inav-rc-quirks" title="Permanent link">#</a></h2>
<p>There are a number of implementation details concerning RC channels and INAV, in particular differences between MSP and traditional (SBUS / CRSF) protocols.</p>
<h3 id="general">General<a class="headerlink" href="#general" title="Permanent link">#</a></h3>
<ul>
<li>Prior to INAV 9.0, firmware was not built by default with <code>USE_MSP_RC_OVERRIDE</code> set, so you need MSP override, you may need to build your own firmware.</li>
<li>Prior to INAV 9.0, you could only override the first 16 channels; INAV 9 will allow overriding 32 channels.</li>
</ul>
<h3 id="inavs-msp-protocol">INAV's MSP protocol<a class="headerlink" href="#inavs-msp-protocol" title="Permanent link">#</a></h3>
<ul>
<li>Does not need <code>USE_MSP_RC_OVERRIDE</code>, flight mode <code>MSP RC Override</code>  or a run time <code>set msp_override_channels = N</code> CLI setting.</li>
<li>INAV will ignore (hold) channels with value of 0. With creative use of a mapping file and limit on number of channels sent by mLRS, you can share input between mLRS and mwp. Do not use the <code>default</code> keyword in your mapping file.</li>
</ul>
<h3 id="inavs-rx-protocols-sbus-crsf-etc">INAV's RX protocols (SBus, CRSF etc.)<a class="headerlink" href="#inavs-rx-protocols-sbus-crsf-etc" title="Permanent link">#</a></h3>
<ul>
<li>Requires the use of <code>USE_MSP_RC_OVERRIDE</code>, flight mode <code>MSP RC Override</code>  and a run time <code>set msp_override_channels = N</code> CLI setting.</li>
<li>Override channels sent to the FC must have valid PWM values. Channel validity is checked even before the override mask is applied.</li>
</ul>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code># With MSP RC,
# default = 0
# ... or don&#39;t have a default line

# For &quot;Standard&quot; RC, there must be a valid RC value for all channels
# default = 1505

# Axis
# Buttons
Button 2 = Channel 17 ;
Button 3 = Channel 18 latch ;
</code></pre></div>
<p>For "standard RC" you would need:</p>
<ul>
<li>Firmware built with <code>#define USE_MSP_RC_OVERRIDE</code> (the default in INAV 9)</li>
<li>Flight mode <code>MSP RC Override</code> asserted.</li>
<li>CLI setting: <code>set msp_override_channels = 196608</code> (requires INAV 9 to override channels &gt; 16).</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014 - 2025 <a href="https://github.com/stronnag/mwptools">Jonathan Hudson</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>