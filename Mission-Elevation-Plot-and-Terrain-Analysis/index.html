
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mission Planner, Ground Control Station, Log Replay">
      
      
        <meta name="author" content="Jonathan Hudson">
      
      
      
        <link rel="prev" href="../mwp-terrain-avoidance-quick-guide/">
      
      
        <link rel="next" href="../mwp-los-tool/">
      
      
      <link rel="icon" href="../images/mwp_icon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>Mission Elevations - mwptools</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/extra.css">
    
      <link rel="stylesheet" href="../assets/pdf.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mission-elevations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="mwptools" class="md-header__button md-logo" aria-label="mwptools" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mwptools
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mission Elevations
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/stronnag/mwptools/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="mwptools" class="md-nav__button md-logo" aria-label="mwptools" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    mwptools
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/stronnag/mwptools/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Home
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp_support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help and Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-Gtk4-migration-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running mwp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Side Bar Concepts and Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mission-editor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mission Editor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gcs-features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ground Control Station Features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../replay-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Replay Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc-ui-elements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Miscellaneous UI Elements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-terrain-avoidance-quick-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terrain Avoidance Quick Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Mission Elevations
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Mission Elevations
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#video-tutorial-ui-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Video Tutorial &amp; UI integration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample-output" class="md-nav__link">
    <span class="md-ellipsis">
      Sample output
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-new-mission-file" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a new mission file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependencies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#go-version" class="md-nav__link">
    <span class="md-ellipsis">
      Go version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    <span class="md-ellipsis">
      Caveats
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datum" class="md-nav__link">
    <span class="md-ellipsis">
      Datum
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#so-whos-right" class="md-nav__link">
    <span class="md-ellipsis">
      So who's right?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-help-and-options" class="md-nav__link">
    <span class="md-ellipsis">
      Command line help and options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kmz-planned-in-google-earth" class="md-nav__link">
    <span class="md-ellipsis">
      KMZ planned in Google Earth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Conversion tools
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#climb-and-dive-angle-report" class="md-nav__link">
    <span class="md-ellipsis">
      Climb and Dive Angle Report
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-los-tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Line of Sight (LOS) Tool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-multi-procotol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    "Serial" device support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-Configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mwp Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-safehomes-editor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Safehome and Auto-land
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-geozones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mwp and Geozones
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-Radar-View/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Radar View
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-telemetry-tracker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telemetry Tracking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-area-planner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mwp Survey Planner
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp_video_player/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Playing Video in mwp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Fly-By-Home-waypoints-%28inav-4-new-feature%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fly By Home Waypoints
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Black-Ops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Anonymous Maps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-follow-me/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mwp Follow Me
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Build and Install
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Build and Install
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Building-with-meson-and-ninja/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build / install mwp (Generic)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Miscellaneous
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Miscellaneous
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-Power-and-screen-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Power and screen management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inav-4.0-multi-missions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    INAV 4.0 Multi-Mission Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mqtt---bulletgcss-telemetry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BulletGCSS Telemetry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Support-for-inav-3.0-WP-features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mwp and INAV 3.0 Mission Updates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Replaying-Ardupilot-logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ardupilot log replay
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Flite-text-to-speech/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flite text to speech
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-Dbus-API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DBus API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp_support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help and Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mwp-miscellaneous-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mwp miscellaneous tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../licence-misc-info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Licence and Alternative Tools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#video-tutorial-ui-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Video Tutorial &amp; UI integration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample-output" class="md-nav__link">
    <span class="md-ellipsis">
      Sample output
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-new-mission-file" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a new mission file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependencies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#go-version" class="md-nav__link">
    <span class="md-ellipsis">
      Go version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    <span class="md-ellipsis">
      Caveats
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datum" class="md-nav__link">
    <span class="md-ellipsis">
      Datum
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#so-whos-right" class="md-nav__link">
    <span class="md-ellipsis">
      So who's right?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-help-and-options" class="md-nav__link">
    <span class="md-ellipsis">
      Command line help and options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kmz-planned-in-google-earth" class="md-nav__link">
    <span class="md-ellipsis">
      KMZ planned in Google Earth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Conversion tools
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#climb-and-dive-angle-report" class="md-nav__link">
    <span class="md-ellipsis">
      Climb and Dive Angle Report
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="mission-elevations">Mission Elevations<a class="headerlink" href="#mission-elevations" title="Permanent link">#</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">#</a></h2>
<p>Prior to <a href="https://github.com/iNavFlight/inav">INAV</a> 3.0, mission altitudes are relative to the HOME (arming) location, which is not part of a mission definition. As a result, the pilot has to be ensure by some other means that the mission will clear any raised elevations on the mission path. For INAV 3.0, missions may be either <a href="../Support-for-inav-3.0-WP-features/">relative to home or absolute</a> (above a <a href="#datum">datum, see below</a>).</p>
<p><strong>mwp</strong> includes a <code>mwp-plot-elevations</code> tool that performs mission and terrain analysis. This tool is platform independent and can be used without <a href="https://github.com/stronnag/mwptools">mwp</a> for mission terrain analysis.</p>
<p><code>mwp-plot-elevations</code> can rewrite the mission file with new elevations to provide a specified ground clearance.</p>
<div class="admonition note">
<p class="admonition-title">Legacy Images</p>
<p>The images this section are from legacy mwp, however the capability is the same.</p>
</div>
<h2 id="video-tutorial-ui-integration">Video Tutorial &amp; UI integration<a class="headerlink" href="#video-tutorial-ui-integration" title="Permanent link">#</a></h2>
<p>From of 2018-12-06, <code>mwp-plot-elevations</code> is integrated into the <code>mwp</code> application.</p>
<p><img alt="mwp integration" src="../images/mwp-ta.png" width="70%" /></p>
<p>There is a <a href="https://www.youtube.com/watch?v=oE3t5Asqhio">video tutorial</a>.</p>
<div class="admonition note">
<p class="admonition-title">Obsolescence Note</p>
<p>The video uses the older ruby application, but that doesn't really affect <em>basic</em> functionality.</p>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/oE3t5Asqhio" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h2 id="sample-output">Sample output<a class="headerlink" href="#sample-output" title="Permanent link">#</a></h2>
<p>Given the mission shown below:</p>
<p><img alt="Test Mission" src="../images/west-field-mission.png" width="50%" /></p>
<p>and knowing that the land rises to the north and west, we can check that we do indeed have adequate clearance with the planned route and elevations:</p>
<pre><code>    # for decimal '.' locales
    $ mwp-plot-elevations -- home 50.9104826,-1.5350745 --plotfile profile.svg  west_field.mission
    # for decimal ',' locales
    $ mwp-plot-elevations --home "50,9104826 -1,5350745" --plotfile profile.svg  west_field.mission
</code></pre>
<p>where:</p>
<ul>
<li><code>west_field.mission</code> is the MW-XML mission file (via <a href="https://github.com/stronnag/mwptools">mwp</a>, INAV configurator, [ezgui, mission planner for INAV] or <a href="https://github.com/stronnag/impload">impload</a>)</li>
<li>the <code>--home lat,lon</code> option defines the home position (which may also be set by the environment variable <code>MWP_HOME</code>), the command line having preference. Note that for modern <a href="https://github.com/stronnag/mwptools">mwp</a> generated mission files, this information is provided in the mission file.</li>
<li>The graphical output is <code>profile.svg</code>, via the <code>--plotfile</code> option.</li>
</ul>
<p>The result from this command is an SVG file, which can be displayed with common image tools (<code>eog</code>, ImageMagick <code>display</code> et al). It can also be converted to a raster image using e.g. <code>rsvg-convert</code>); a sample is shown below:</p>
<p><img alt="Mission Elevation" src="../images/mission-elev.svg" width="50%" /></p>
<p>The red line represents the planned mission altitudes (which are defined relative to the estimated home location), and the green area represents the terrain. As we can see, we clear the hill (and other terrain), but cannot guarantee that we have LOS to lowest point of the mission, or that we're clear of the trees.</p>
<p>We can also specify a "clearance" option, in the image below this was set to 16m. Where the blue line is above the red line, one should review that the mission elevations are adequate.</p>
<p><img alt="Mission Clearance" src="../images/wf-margin.svg" width="50%" /></p>
<h2 id="creating-a-new-mission-file">Creating a new mission file<a class="headerlink" href="#creating-a-new-mission-file" title="Permanent link">#</a></h2>
<p>It is also possible (see command line options below) to write out a new mission that takes into account the clearance (<code>margin</code> parameter). If we then plot this new mission file, we can see that we are at least <code>margin</code> (in this example 16m) distance clear of the terrain.</p>
<p><img alt="Mission Clearance" src="../images/modified-mission.svg" width="50%" /></p>
<p>Note that the original mission elevations are still taken into account. We can also ignore these, so we end up the absolute clearance distance above the terrain.</p>
<pre><code>$ mwp-plot-elevations nm_west_field.mission --output /tmp/p1.mission --no-mission-alts
</code></pre>
<p><img alt="Absolute Clearance" src="../images/abs.svg" width="50%" /></p>
<h2 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">#</a></h2>
<p>The <strong><code>mwp-plot-elevations</code></strong> has <strong>NO</strong> dependency on <a href="https://github.com/stronnag/mwptools">mwp</a> or Linux / FreeBSD, it can just as easily be run on MacOS or MS Windows. It does however has some dependencies:</p>
<h3 id="go-version">Go version<a class="headerlink" href="#go-version" title="Permanent link">#</a></h3>
<ul>
<li>
<p>Go compiler (1.18 or later)</p>
</li>
<li>
<p>gnuplot</p>
</li>
</ul>
<p><code>gnuplot</code> is easily provided (by your distro or from a binary download).</p>
<p>On all operating systems, the terrain graph is also plotted interactively, regardless of whether the <code>-p</code> (save SVG plot) option has been specified. The following shows the UI on Windows (it's pretty much the same on other OS).</p>
<p><img alt="Interactive UI" src="../images/plot-elevations-windows.png" width="50%" /></p>
<h2 id="caveats">Caveats<a class="headerlink" href="#caveats" title="Permanent link">#</a></h2>
<ul>
<li>3rd party terrain data is not guaranteed, either as to its absolute accuracy, nor to its coverage.</li>
<li>Terrain data does not take into account other obstacles (trees, buildings, power lines etc).</li>
<li>The tool does not faithfully model the vehicle motion. As multi-rotor and fixed-wing have different climb behaviours, this would be quite complex.</li>
<li>RTH altitude has to specified if you wish to model it, and assumes 'AT LEAST' behaviour.</li>
</ul>
<h2 id="datum">Datum<a class="headerlink" href="#datum" title="Permanent link">#</a></h2>
<p>Digital elevation services can use the WGS84 Ellipsoid or "sea level"; survey maps typically use AMSL (Above Mean Sea Level); GPS can report either or both of WGS Ellipsoid and above MSL (mean sea level). INAV and mwp both use AMSL.</p>
<ul>
<li>mwp currently uses locally (and transparently) hosted <a href="https://registry.opendata.aws/terrain-tiles/">Mapzen DEM</a> DEMs to obtain elevations. The user should apply a suitable margin.</li>
<li><a href="https://github.com/iNavFlight/inav">INAV</a> firmware uses the GPS' AMSL value, so <a href="https://github.com/iNavFlight/inav">INAV</a> and <a href="https://github.com/stronnag/mwptools">mwp</a> are consistent on this.</li>
</ul>
<p>There may be a difference  between ASML, "sea level", WGS84 Ellipsoid and Survey heights, for example, for a test point of  54.149461 -4.669315 (summit of South Barrule, Isle of Man):</p>
<ul>
<li>Ordnance Survey (OS) Map (official survey): 483m</li>
<li>Mapzen DEM (mwp) 476m</li>
<li>OpenTopoData: 476m (mapzen)</li>
<li>OpenTopoData: 485 (aster30m)</li>
<li>Google Earth : 470m</li>
<li>Bing Ellipsoid (Configurator): 526m</li>
<li>Bing "Sea Level" (Configurator): 470m</li>
</ul>
<p>Note that while OpenTopo appears to be an accurate web service, it has significant issues that mean it is unacceptable as a reliable data source:</p>
<ul>
<li>Rate limited to one query per second.</li>
<li>Limited to 100 points per query (INAV supports 120 point missions...).</li>
<li>Limited to 1000 queries per 24 hour period.</li>
</ul>
<p>For these reasons, <a href="https://github.com/stronnag/mwptools">mwp</a> used locally hosted Mapzen DEMs.</p>
<p>There is a more detailed analysis of the available DEMs <a href="https://github.com/stronnag/mwptools/wiki/Comparison-of-Digital-Elevations-Models-%28DEMs%29">on the wiki</a>.</p>
<h2 id="so-whos-right">So who's right?<a class="headerlink" href="#so-whos-right" title="Permanent link">#</a></h2>
<p>Many years ago, I took a GPS up South Barrule.</p>
<p><img alt="barrule" src="https://user-images.githubusercontent.com/158229/129704384-a91904b9-becc-435d-9c38-9bc0fa31563d.png" width="40%" /></p>
<p>It reads 485m, this pretty much agrees with the OS (Survey) height (AMSL). So the real issue is with the DEM available online (either Bing or Google). The 'sea-level" height DEM reports <strong>for this location</strong> is c. 13m below Ordnance Survey AMSL value whilst the WGS84 ellipsoid value is 43m above the OS AMSL value.</p>
<h2 id="command-line-help-and-options">Command line help and options<a class="headerlink" href="#command-line-help-and-options" title="Permanent link">#</a></h2>
<pre><code>$ mwp-plot-elevations --help
  -dump
    Dump  internal data, exit
  -force-alt int
    Force Altitude Mode (-1=from mission, 0=Relative, 1=Absolute (default -1)
  -home string
    home as DD.dddd,DDD.dddd
  -keep
    Keep intermediate plt files
  -margin int
    Clearance margin (m)
  -no-graph
    No interactive plot
  -no-mission-alts
    Ignore extant mission altitudes
  -output string
    Revised mission file
  -rth-alt int
    RTH altitude (m)
  -svg string
    SVG graph file
  -upland
    Update landing elevation offset
</code></pre>
<p>Note that Go considers <code>-foo</code> and <code>--foo</code> to the equivalent. The ruby script requires the <code>--</code> notation.</p>
<h2 id="configuration-file">Configuration File<a class="headerlink" href="#configuration-file" title="Permanent link">#</a></h2>
<p>As well as specifying options such as home location, clearance margin and RTH altitude on the command line (or as an environment variable), some or all of these options may be set in a configuration file.</p>
<p><code>mwp-plot-elevations</code> looks for options in one of the following (in order) <code>./.elev-plot.rc</code> (i.e. current directory), <code>$HOME/.config/mwp/elev-plot</code>,  and <code>$HOME/.elev-plot.rc</code>. The configuration file is a plain text file containing <code>key=value</code> pairs. Blank lines and lines beginning with <code>#</code> are ignored; the following example illustrates the recognised keys. Note that  <code>$HOME/.config/mwp/elev-plot</code> is the preferred location, as this is also used by <code>mwp</code> to populate its graphical dialogue to launch the analysis tool.</p>
<pre><code># settings for mwp-plot-elevations
margin = 16
home = 50.910476,-1.535038
# for ',' locales
# home = 50,910476 -1,535038
rth-alt=25
# 'sanity' is the home -&gt; WP1 distance check; default if not set here is 100m
sanity = 200
</code></pre>
<h2 id="usage-examples">Usage Examples<a class="headerlink" href="#usage-examples" title="Permanent link">#</a></h2>
<pre><code># Interactive plot, using the above configuration file:
$ mwp-plot-elevations nm_west_field.mission

# Interactive plot. save SVG file
$ mwp-plot-elevations --plotfile /tmp/mission.svg nm_west_field.mission

# Interactive plot. save SVG file, rewrite mission file
$ mwp-plot-elevations --plotfile /tmp/mission.svg --output new_west_field.mission nm_west_field.mission

# Interactive plot. save SVG file, rewrite mission file, override clearance margin (20m)
$ mwp-plot-elevationsb --plotfile /tmp/mission.svg --outout new_west_field.mission --margin 20 nm_west_field.mission

# Interactive plot. save SVG file, rewrite mission file,
# override clearance margin (20m), reduce RTH altitude (22m)
$ mwp-plot-elevations --plotfile /tmp/mission.svg --output new_west_field.mission --margin 20 --rth-alt 22 nm_west_field.mission
</code></pre>
<p>Another contrived example ... create a mission in Google Earth (tied to ground), save as KMZ, convert to MWXML mission file with <a href="https://github.com/stronnag/impload">impload</a> (0 altitude). Use <code>mwp-plot-elevations.rb</code> to calculate a safe mission.</p>
<h3 id="kmz-planned-in-google-earth">KMZ planned in Google Earth<a class="headerlink" href="#kmz-planned-in-google-earth" title="Permanent link">#</a></h3>
<p><img alt="Google Earth Mission Plan" src="../images/perwick-ge.png" width="60%" /></p>
<h3 id="conversion-tools">Conversion tools<a class="headerlink" href="#conversion-tools" title="Permanent link">#</a></h3>
<pre><code># convert the saved KMZ file to a MWXML mission file
$ impload convert  /tmp/IOM.kmz /tmp/perwick.mission

# Verify the elevations and clearance with plot-elevations.rb
$ mwp-plot-elevations.rb -h  54.068826,-4.735472   -m 40 /tmp/perwick.mission
</code></pre>
<p><img alt="Elevations verified" src="../images/perwick-m0.svg" width="50%" /></p>
<p>Looks OK (well, apart from the flying through the hill, due to impload's default altitude of 20m).</p>
<p>If we specify that a new mission file be generated (<code>--output</code>), the updated mission is also plotted, and we can see that this clears the hill.</p>
<pre><code>mwp-plot-elevations --home  54.068826,-4.735472 --margin 40 --output /tmp/perwick-ok.mission /tmp/perwick.mission
</code></pre>
<p><img alt="Elevations verified" src="../images/perwick-m1.svg" width="50%" /></p>
<p>It's not yet perfect, we could be more aggressive in reaching just the clearance altitude, but we clear the hill!.</p>
<h2 id="climb-and-dive-angle-report">Climb and Dive Angle Report<a class="headerlink" href="#climb-and-dive-angle-report" title="Permanent link">#</a></h2>
<figure>
<p><img alt="example mission" src="../images/barrule-mission.png" width="60%" /></p>
<figcaption>Mission used for climb /dive example</figcaption>
</figure>
<p>As of 2021-06, it's also possible to get climb and dive angles for the calculated mission. Before I added the WP12 =&gt; WP7 jump in the mission shown below, it was almost OK; below the desired clearance in a couple of places and just failing to clear the hill at WP15. After adding the JUMP, it hits the terrain pretty conclusively between WP12 and WP7. The modified mission is interesting, as it has to adjust the WPs within the JUMP for the worst case (so the WP7, the second pass is definitive).</p>
<p>The final result:</p>
<p><img alt="jump mission" src="../images/mwp-plot-elevations-jump.png" width="50%" /></p>
<p>We also get a climb / dive report, currently to STDOUT and <code>$TMP/mwpmission-angles.txt</code> (tab separated for easy analysis).</p>
<pre><code>$ mwp-plot-elevations --margin 25 -no-mission-alts --output /tmp/n.mission \
 --home 54.125205,-4.730322 -rth-alt 40 mwp/missions/IoM/barrule-jump.mission
HOME -  WP1  21.3°  (climb)
 WP1 -  WP2 -13.9°  (dive)
 WP2 -  WP3  16.2°  (climb)
 WP3 -  WP4  -8.1°  (dive)
 WP4 -  WP5  11.4°  (climb)
 WP5 -  WP6   4.9°  (climb)
 WP6 -  WP7  -6.6°  (dive)
 WP7 -  WP8  -8.9°  (dive)
 WP8 -  WP9   1.3°  (climb)
 WP9 - WP10   7.0°  (climb)
WP10 - WP11   4.4°  (climb)
WP11 - WP12 -11.9°  (dive)
WP12 -  WP7   0.3°  (climb)
 WP7 -  WP8  -8.9°  (dive)
 WP8 -  WP9   1.3°  (climb)
 WP9 - WP10   7.0°  (climb)
WP10 - WP11   4.4°  (climb)
WP11 - WP12 -11.9°  (dive)
WP12 - WP14   2.5°  (climb)
WP14 - WP15  -5.2°  (dive)
WP15 -  RTH  -3.6°  (dive)
</code></pre>
<p>If you run <strong>mwp-plot-elevations</strong> via <strong>mwp</strong>, the information is presented in a separate window.</p>
<p><img alt="cd-analysts" src="../images/mwp-elev-cd-analysis.png" width="30%" /></p>
<p><strong>mwp</strong> can also highlight any legs that exceed user-defined (not 0) climb and dive angle limits. However, it's up to you to work out the best solution.</p>
<p><img alt="cd-limits" src="../images/climb-dive-indicators.png" width="50%" /></p>
<p>The steep hill and valley at the start are just too much here; best to reroute.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014 - 2024 <a href="https://github.com/stronnag/mwptools">Jonathan Hudson</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>